// Generated by CoffeeScript 1.6.3
(function() {
  var Mine;

  module.exports = function(game, opts) {
    return new Mine(game, opts);
  };

  Mine = function(game, opts) {
    this.game = game;
    opts = opts != null ? opts : {};
    opts.defaultHardness || (opts.defaultHardness = 0);
    this.opts = opts;
    this.hardness = opts.defaultHardness;
    this.progress = 0;
    this.bindEvents();
    return this;
  };

  Mine.prototype.bindEvents = function() {
    var _this = this;
    return this.game.on('mining', function(hit_voxel) {
      if (hit_voxel == null) {
        console.log("no block mined");
        return;
      }
      _this.progress += 1;
      if (_this.progress > _this.hardness) {
        _this.game.setBlock(hit_voxel, 0);
        return _this.progress = 0;
      }
    });
  };

}).call(this);
